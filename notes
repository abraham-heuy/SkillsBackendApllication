/book-api
│── /src
│   ├── /routes
│   │   ├── books.routes.ts
│   │   ├── users.routes.ts
│   ├── /controllers
│   │   ├── books.controller.ts
│   │   ├── users.controller.ts
│   ├── /middleware
│   │   ├── auth.middleware.ts
│   ├── /db
│   │   ├── db.ts
│   ├── server.ts
│   ├── app.ts
│── .env
│── package.json
│── tsconfig.json




docker
#!/bin/bash

## updating packages

sudo yum update -y

## Install docker
sudo yum -y install docker

## start docker

sudo service docker start

## create container

sudo docker run -d  -p 80:80 ndambuki/backendusers



name: CD Pipeline
on:
    workflow_run:
        workflows: ["CI pipeline"]
        types:
            - completed
jobs:
    build:
        runs-on: self-hosted
        steps:
           
            - name: Delete Old Docker Container
              run:  sudo docker rm -f backend || true

            - name: Delete Image
              run: sudo docker image rmi ndambuki/google-io || true

            - name: Pull Docker Image
              run: sudo docker pull ndambuki/google-io

            - name: Run Docker Container
              run: sudo docker run  -d -p 80:80 --name backend ndambuki/google-io

              
name: CI pipeline
on: 
    push:
        branches:
            - master
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Get Code
              uses: actions/checkout@v4

            - name: Login DockerHub
              env:
                DOCKER_USERNAME: ${{secrets.DOCKER_USERNAME}}
                DOCKER_PASSWORD: ${{secrets.DOCKER_PASSWORD}}
              run: docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD

            - name: Build the Docker Image
              run: docker build -t ndambuki/google-io .
            
            - name: Push to DockerHub
              run: docker push ndambuki/google-io:latest




 dckr_pat_IZStS6gfwMyuYYs5RfhhrpPfuUs             